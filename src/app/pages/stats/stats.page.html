<ion-header>
  <ion-toolbar>
    <ion-title><b>Statistiche</b></ion-title>
  </ion-toolbar>
</ion-header>

<ion-content class="stats-page ion-padding">

  <!-- Riepilogo -->
  <div class="summary-boxes">
    <div class="summary-box">
      <h2>Task completate</h2>
      <p>{{ completedTasks }} / {{ totalTasks }}</p>
    </div>

    <div class="summary-box">
      <h2>Oggi</h2>
      <p>{{ (todayMinutes / 60) | number:'1.0-1' }}h</p>
    </div>

    <div class="summary-box">
      <h2>Target</h2>
      <p>{{ todayTarget / 60 }}h</p>
    </div>
  </div>

  <!-- Grafico settimanale -->
  <div class="weekly-graph">
    <h2>Ore per giorno</h2>

    <div class="bars">
      <div *ngFor="let day of weekStats" class="bar-container">
        <span class="bar-label">{{ day.label }}</span>

        <div class="bar" [style.height.%]="day.percentage">
          <span class="bar-value">{{ day.hours }}h</span>
        </div>
      </div>
    </div>
  </div>

  <!-- Progresso giornaliero -->
  <div class="daily-progress">
    <h2>Progresso odierno</h2>
    <ion-progress-bar
      [value]="todayProgress"
      color="success">
    </ion-progress-bar>
<<<<<<< HEAD

    <p>{{ todayMinutes }} / {{ todayTarget }} min</p>
  </div>

    <!-- =========================
       FOCUS SESSIONS
  ========================== -->
  <div class="focus-section">
    <h2>Focus Sessions</h2>

    <div class="focus-summary">
      <div class="focus-card">
        <h3>Totale sessioni</h3>
        <p>{{ focusTotalSessions }}</p>
      </div>

      <div class="focus-card">
        <h3>Minuti totali</h3>
        <p>{{ focusTotalMinutes }} min</p>
      </div>

      <div class="focus-card">
        <h3>Media</h3>
        <p>{{ focusAvgMinutes }} min</p>
      </div>
    </div>

    <div class="focus-list">
      <h3>Ultime 3 sessioni</h3>

      <div *ngIf="focusLastSessions.length === 0" class="focus-empty">
        Nessuna sessione salvata
      </div>

      <div *ngFor="let s of focusLastSessions" class="focus-row">
        <div class="focus-row-left">
          <span class="focus-subject">{{ s.subject }}</span>
          <span class="focus-date">{{ s.day | date:'dd/MM/yyyy HH:mm' }}</span>
        </div>
        <div class="focus-row-right">
          <span class="focus-min">{{ s.minutes }} min</span>
        </div>
      </div>
    </div>
=======

    <p>{{ todayMinutes }} / {{ todayTarget }} min</p>
>>>>>>> 87382aa (fixed study load distribution and update stats calculations)
  </div>


</ion-content>

<ion-footer>
  <ion-toolbar>
    <ion-grid>
      <ion-row>

        <ion-col class="tab"
                 [class.active]="activeTab === 'planner'"
                 (click)="navigate('planner')">
          <div class="tab-content">
            <img src="assets/icon/calendario.jpeg" class="logo-image">
            <ion-label>Planner</ion-label>
          </div>
        </ion-col>

        <ion-col class="tab"
                 [class.active]="activeTab === 'stats'"
                 (click)="navigate('stats')">
          <div class="tab-content">
            <img src="assets/icon/statistiche.jpeg" class="logo-image">
            <ion-label>Statistiche</ion-label>
          </div>
        </ion-col>

        <ion-col class="tab"
                 [class.active]="activeTab === 'focus'"
                 (click)="navigate('focus')">
          <div class="tab-content">
            <img src="assets/icon/orologio.jpeg" class="logo-image">
            <ion-label>Focus</ion-label>
          </div>
        </ion-col>

        <ion-col class="tab"
                 [class.active]="activeTab === 'profile'"
                 (click)="navigate('profile')">
          <div class="tab-content">
            <img src="assets/icon/profilo.jpeg" class="logo-image">
            <ion-label>Profilo</ion-label>
          </div>
        </ion-col>

      </ion-row>
    </ion-grid>
  </ion-toolbar>
</ion-footer>